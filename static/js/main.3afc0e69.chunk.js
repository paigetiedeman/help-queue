(this["webpackJsonphelp-queue"]=this["webpackJsonphelp-queue"]||[]).push([[0],{218:function(e,t,n){e.exports=n(419)},224:function(e,t,n){},419:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),i=n(84),r=n.n(i),c=(n(223),n(224),n(59));var o=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null," Help Queue"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(c.b,{to:"/"},"Home")),l.a.createElement("li",null,l.a.createElement(c.b,{to:"/signin"},"Sign In"))))},s=n(212),u=n(213),m=n(217),d=n(216);var E=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{onSubmit:e.formSubmissionHandler},l.a.createElement("input",{type:"text",name:"names",placeholder:"Pair Names",className:"form-control"}),l.a.createElement("br",null),l.a.createElement("input",{type:"text",name:"location",placeholder:"Location",className:"form-control"}),l.a.createElement("br",null),l.a.createElement("textarea",{name:"issue",placeholder:"Describe your issue.",className:"form-control"}),l.a.createElement("br",null),l.a.createElement("button",{type:"submit",className:"btn btn-dark"},e.buttonText)),l.a.createElement("br",null))},p=n(12);var f=function(e){var t=Object(p.useFirestore)();return l.a.createElement(l.a.Fragment,null,l.a.createElement(E,{formSubmissionHandler:function(n){return n.preventDefault(),e.onNewTicketCreation(),t.collection("tickets").add({names:n.target.names.value,location:n.target.location.value,issue:n.target.issue.value,timeOpen:t.FieldValue.serverTimestamp()})},buttonText:"Help!"}))};var h=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{onClick:function(){return e.whenTicketClicked(e.id)}},l.a.createElement("h3",null,e.location," - ",e.names),l.a.createElement("p",null,l.a.createElement("em",null,e.issue)),l.a.createElement("p",null,l.a.createElement("em",null,e.formattedWaitTime)),l.a.createElement("hr",null)))},g=n(46);var b=function(e){Object(p.useFirestoreConnect)([{collection:"tickets"}]);var t=Object(g.c)((function(e){return e.firestore.ordered.tickets}));return Object(p.isLoaded)(t)?l.a.createElement(l.a.Fragment,null,l.a.createElement("hr",null),t.map((function(t){return l.a.createElement(h,{whenTicketClicked:e.onTicketSelection,names:t.names,location:t.location,issue:t.issue,formattedWaitTime:t.formattedWaitTime,id:t.id,key:t.id})}))):l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"Loading..."))};var T=function(e){var t=e.ticket;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Ticket Detail"),l.a.createElement("h3",null,t.location," - ",t.names),l.a.createElement("p",null,l.a.createElement("em",null,t.issue)),l.a.createElement("p",null,l.a.createElement("em",null,t.formattedWaitTime)),l.a.createElement("button",{onClick:e.onClickingEdit,className:"btn btn-dark"},"Update Ticket"),l.a.createElement("button",{onClick:function(){return e.onClickingDelete(t.id)},className:"btn btn-dark"},"Close Ticket"),l.a.createElement("hr",null))};var k=function(e){var t=Object(p.useFirestore)(),n=e.ticket;return l.a.createElement(l.a.Fragment,null,l.a.createElement(E,{formSubmissionHandler:function(a){a.preventDefault(),e.onEditTicket();var l={names:a.target.names.value,location:a.target.location.value,issue:a.target.issue.value};return t.update({collection:"tickets",doc:n.id},l)},buttonText:"Update Ticket"}))},v=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).updateTicketElapsedWaitTime=function(){var e=a.props.dispatch;Object.values(a.props.mainTicketList).forEach((function(t){var n=t.timeOpen.fromNow(!0),a={type:"UPDATE_TIME",id:t.id,formattedWaitTime:n};e(a)}))},a.handleAddingNewTicketToList=function(e){(0,a.props.dispatch)({type:"TOGGLE_FORM"})},a.handleClick=function(){null!=a.state.selectedTicket?a.setState({selectedTicket:null,editing:!1}):(0,a.props.dispatch)({type:"TOGGLE_FORM"})},a.handleChangingSelectedTicket=function(e){a.props.firestore.get({collection:"tickets",doc:e}).then((function(e){var t={names:e.get("names"),location:e.get("location"),issue:e.get("issue"),id:e.id};a.setState({selectedTicket:t})}))},a.handleDeletingTicket=function(e){a.props.firestore.delete({collection:"tickets",doc:e}),a.setState({selectedTicket:null})},a.handleEditClick=function(){a.setState({editing:!0})},a.handleEditingTicketInList=function(){a.setState({editing:!1,selectedTicket:null})},console.log(e),a.state={selectedTicket:null,editing:!1},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.waitTimeUpdateTimer=setInterval((function(){return e.updateTicketElapsedWaitTime()}),6e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.waitTimeUpdateTimer)}},{key:"render",value:function(){var e=this.props.firebase.auth();if(!Object(p.isLoaded)(e))return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Loading..."));if(Object(p.isLoaded)(e)&&null==e.currentUser)return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"You must be signed in to access the queue."));if(Object(p.isLoaded)(e)&&null!=e.currentUser){var t=null,n=null;return this.state.editing?(t=l.a.createElement(k,{ticket:this.state.selectedTicket,onEditTicket:this.handleEditingTicketInList}),n="Return to Ticket List"):null!=this.state.selectedTicket?(t=l.a.createElement(T,{ticket:this.state.selectedTicket,onClickingDelete:this.handleDeletingTicket,onClickingEdit:this.handleEditClick}),n="Return to Ticket List"):this.props.formVisibleOnPage?(t=l.a.createElement(f,{onNewTicketCreation:this.handleAddingNewTicketToList}),n="Return to Ticket List"):(t=l.a.createElement(b,{ticketList:this.props.mainTicketList,onTicketSelection:this.handleChangingSelectedTicket}),n="Add Ticket"),l.a.createElement(l.a.Fragment,null,t,l.a.createElement("button",{onClick:this.handleClick,className:"btn btn-dark"},n))}}}]),n}(l.a.Component);v=Object(g.b)((function(e){return{mainTicketList:e.mainTicketList,formVisibleOnPage:e.formVisibleOnPage}}))(v);var S=Object(p.withFirestore)(v),A=n(88),P=n.n(A);function _(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Sign up"),l.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=e.target.email.value,n=e.target.password.value;P.a.auth().createUserWithEmailAndPassword(t,n).then((function(){console.log("successfully signed up!")})).catch((function(e){console.log(e.message)}))}},l.a.createElement("input",{type:"text",name:"email",placeholder:"email",className:"form-control"}),l.a.createElement("br",null),l.a.createElement("input",{type:"password",name:"password",placeholder:"Password",className:"form-control"}),l.a.createElement("br",null),l.a.createElement("button",{type:"submit",className:"btn btn-dark"},"Sign up")),l.a.createElement("h1",null,"Sign In"),l.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=e.target.signinEmail.value,n=e.target.signinPassword.value;P.a.auth().signInWithEmailAndPassword(t,n).then((function(){console.log("Successfully signed in!")})).catch((function(e){console.log(e.message)}))}},l.a.createElement("input",{type:"text",name:"signinEmail",placeholder:"email",className:"form-control"}),l.a.createElement("br",null),l.a.createElement("input",{type:"password",name:"signinPassword",placeholder:"Password",className:"form-control"}),l.a.createElement("br",null),l.a.createElement("button",{type:"submit",className:"btn btn-dark"},"Sign In")),l.a.createElement("button",{onClick:function(){P.a.auth().signOut().then((function(){console.log("Successfully signed out!")})).catch((function(e){console.log(e.message)}))},className:"btn btn-dark"},"Sign out"),l.a.createElement("br",null))}var C=n(25);var O=function(){return l.a.createElement("div",{className:"container"},l.a.createElement(c.a,null,l.a.createElement(o,null),l.a.createElement(C.c,null,l.a.createElement(C.a,{path:"/signin"},l.a.createElement(_,null)),l.a.createElement(C.a,{path:"/"},l.a.createElement(S,null)))))},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,420)).then((function(t){var n=t.getCLS,a=t.getFID,l=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),l(e),i(e),r(e)}))},I=n(45),R=n(86),L=n(215),N=n(87),w=Object(I.b)({formVisibleOnPage:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_FORM":return!e;default:return e}},mainTicketList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.id,a=t.formattedWaitTime;switch(t.type){case"DELETE_TICKET":var l=Object(L.a)({},e);return delete l[n],l;case"UPDATE_TIME":var i=Object.assign({},e[n],{formattedWaitTime:a}),r=Object.assign({},e,Object(R.a)({},n,i));return r;default:return e}},firestore:N.firestoreReducer}),y=n(89),D=(n(417),{apiKey:"AIzaSyAZPo0PhGS9289_GS6CY8iui0_zPinUKq4",authDomain:"redux-help-queue-add0d.firebaseapp.com",databaseURL:"https://redux-help-queue-add0d.firebaseio.com",projectId:"redux-help-queue-add0d",storageBucket:"redux-help-queue-add0d.appspot.com",messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"/help-queue",REACT_APP_FIREBASE_API_KEY:"AIzaSyAZPo0PhGS9289_GS6CY8iui0_zPinUKq4",REACT_APP_FIREBASE_APP_ID:"1:983395290075:web:586fd79ade60f80c5a35fe",REACT_APP_FIREBASE_AUTH_DOMAIN:"redux-help-queue-add0d.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://redux-help-queue-add0d.firebaseio.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"983395290075",REACT_APP_FIREBASE_PROJECT_ID:"redux-help-queue-add0d",REACT_APP_FIREBASE_STORAGE_BUCKET:"redux-help-queue-add0d.appspot.com"}).REACT_APP_FIREBASE_SENDER_ID,appId:"1:983395290075:web:586fd79ade60f80c5a35fe"});y.initializeApp(D),y.firestore();var j=y,x=(n(418),Object(I.c)(w));x.subscribe((function(){return console.log(x.getState())}));var U={firebase:j,config:{userProfile:"users",useFirestoreForProfile:!0},dispatch:x.dispatch,createFirestoreInstance:N.createFirestoreInstance};r.a.render(l.a.createElement(g.a,{store:x},l.a.createElement(p.ReactReduxFirebaseProvider,U,l.a.createElement(O,null))),document.getElementById("root")),F()}},[[218,1,2]]]);
//# sourceMappingURL=main.3afc0e69.chunk.js.map