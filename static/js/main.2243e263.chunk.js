(this["webpackJsonphelp-queue"]=this["webpackJsonphelp-queue"]||[]).push([[0],{229:function(e,t,n){e.exports=n(423)},235:function(e,t,n){},390:function(e,t,n){},423:function(e,t,n){"use strict";n.r(t);var a=n(4),l=n.n(a),i=n(102),r=n.n(i),c=(n(234),n(235),n(77));var s=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("nav",{className:"navbar bg-light navbar-light navbar-expand-lg"},l.a.createElement("h2",{className:"title"}," Help Queue"),l.a.createElement("div",null,l.a.createElement("button",{className:"btn btn-link"},l.a.createElement(c.b,{to:"/",className:"nav-link"},"Home")),l.a.createElement("button",{className:"btn btn-link"},l.a.createElement(c.b,{to:"/signin",className:"nav-link"},"Sign In")))))},u=n(1),o=n(3),m=n(9),d=n(10);var E=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{onSubmit:e.formSubmissionHandler},l.a.createElement("input",{type:"text",name:"names",placeholder:"Pair Names",className:"form-control"}),l.a.createElement("br",null),l.a.createElement("input",{type:"text",name:"location",placeholder:"Location",className:"form-control"}),l.a.createElement("br",null),l.a.createElement("textarea",{name:"issue",placeholder:"Describe your issue.",className:"form-control"}),l.a.createElement("br",null),l.a.createElement("button",{type:"submit",className:"btn btn-dark"},e.buttonText)),l.a.createElement("br",null))},p=n(27);var b=function(e){var t=Object(p.useFirestore)();return l.a.createElement(l.a.Fragment,null,l.a.createElement(E,{formSubmissionHandler:function(n){return n.preventDefault(),e.onNewTicketCreation(),t.collection("tickets").add({names:n.target.names.value,location:n.target.location.value,issue:n.target.issue.value,timeOpen:t.FieldValue.serverTimestamp()})},buttonText:"Help!"}))};var f=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{onClick:function(){return e.whenTicketClicked(e.id)}},l.a.createElement("h3",null,e.location," - ",e.names),l.a.createElement("p",null,l.a.createElement("em",null,e.issue)),l.a.createElement("p",null,l.a.createElement("em",null,e.formattedWaitTime)),l.a.createElement("hr",null)))},h=n(63);var g=function(e){Object(p.useFirestoreConnect)([{collection:"tickets"}]);var t=Object(h.c)((function(e){return e.firestore.ordered.tickets}));return Object(p.isLoaded)(t)?l.a.createElement(l.a.Fragment,null,l.a.createElement("hr",null),t.map((function(t){return l.a.createElement(f,{whenTicketClicked:e.onTicketSelection,names:t.names,location:t.location,issue:t.issue,formattedWaitTime:t.formattedWaitTime,timeOpen:t.timeOpen,id:t.id,key:t.id})}))):l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"Loading..."))};var k=function(e){var t=e.ticket;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Ticket Detail"),l.a.createElement("h3",null,t.location," - ",t.names),l.a.createElement("p",null,l.a.createElement("em",null,t.issue)),l.a.createElement("p",null,l.a.createElement("em",null,t.formattedWaitTime)),l.a.createElement("button",{onClick:e.onClickingEdit,className:"btn btn-dark"},"Update Ticket"),l.a.createElement("button",{onClick:function(){return e.onClickingDelete(t.id)},className:"btn btn-dark"},"Close Ticket"),l.a.createElement("hr",null))};var T=function(e){var t=Object(p.useFirestore)(),n=e.ticket;return l.a.createElement(l.a.Fragment,null,l.a.createElement(E,{formSubmissionHandler:function(a){a.preventDefault(),e.onEditTicket();var l={names:a.target.names.value,location:a.target.location.value,issue:a.target.issue.value,timeOpen:a.target.timeOpen.value};return t.update({collection:"tickets",doc:n.id},l)},buttonText:"Update Ticket"}))},v=n(36),O=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).updateTicketElapsedWaitTime=function(){var e=a.props.dispatch;Object.values(a.props.mainTicketList).forEach((function(t){var n=t.timeOpen.fromNow(!0),a={type:"UPDATE_TIME",id:t.id,formattedWaitTime:n};e(a)}))},a.handleAddingNewTicketToList=function(){(0,a.props.dispatch)({type:"TOGGLE_FORM"})},a.handleClick=function(){null!=a.state.selectedTicket?a.setState({selectedTicket:null,editing:!1}):(0,a.props.dispatch)({type:"TOGGLE_FORM"})},a.handleChangingSelectedTicket=function(e){a.props.firestore.get({collection:"tickets",doc:e}).then((function(e){var t={names:e.get("names"),location:e.get("location"),issue:e.get("issue"),timeOpen:e.get("timeOpen"),id:e.id};a.setState({selectedTicket:t})}))},a.handleDeletingTicket=function(e){a.props.firestore.delete({collection:"tickets",doc:e}),a.setState({selectedTicket:null})},a.handleEditClick=function(){a.setState({editing:!0})},a.handleEditingTicketInList=function(){a.setState({editing:!1,selectedTicket:null})},console.log(e),a.state={selectedTicket:null,editing:!1},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.waitTimeUpdateTimer=setInterval((function(){return e.updateTicketElapsedWaitTime()}),6e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.waitTimeUpdateTimer)}},{key:"render",value:function(){var e=Object(v.b)();if(!Object(p.isLoaded)(e))return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Loading..."));if(Object(p.isLoaded)(e)&&null==e.currentUser)return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"You must be signed in to access the queue."));if(Object(p.isLoaded)(e)&&null!=e.currentUser){var t=null,n=null;return this.state.editing?(t=l.a.createElement(T,{ticket:this.state.selectedTicket,onEditTicket:this.handleEditingTicketInList}),n="Return to Ticket List"):null!=this.state.selectedTicket?(t=l.a.createElement(k,{ticket:this.state.selectedTicket,onClickingDelete:this.handleDeletingTicket,onClickingEdit:this.handleEditClick}),n="Return to Ticket List"):this.props.formVisibleOnPage?(t=l.a.createElement(b,{onNewTicketCreation:this.handleAddingNewTicketToList}),n="Return to Ticket List"):(t=l.a.createElement(g,{ticketList:this.props.mainTicketList,onTicketSelection:this.handleChangingSelectedTicket}),n="Add Ticket"),l.a.createElement(l.a.Fragment,null,t,l.a.createElement("button",{onClick:this.handleClick,className:"btn btn-dark"},n))}}}]),n}(l.a.Component);O=Object(h.b)((function(e){return{mainTicketList:e.mainTicketList,formVisibleOnPage:e.formVisibleOnPage}}))(O);var S=Object(p.withFirestore)(O);var _=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Sign up"),l.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=e.target.email.value,n=e.target.password.value,a=Object(v.b)();Object(v.a)(a,t,n).then((function(){alert("Successfully signed up!")})).catch((function(e){alert(e.message)}))}},l.a.createElement("input",{type:"text",name:"email",placeholder:"email",className:"form-control"}),l.a.createElement("br",null),l.a.createElement("input",{type:"password",name:"password",placeholder:"Password",className:"form-control"}),l.a.createElement("br",null),l.a.createElement("button",{type:"submit",className:"btn btn-dark"},"Sign up")),l.a.createElement("h1",null,"Sign In"),l.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=e.target.signinEmail.value,n=e.target.signinPassword.value,a=Object(v.b)();Object(v.c)(a,t,n).then((function(){alert("Successfully signed in!")})).catch((function(e){alert(e.message)}))}},l.a.createElement("input",{type:"text",name:"signinEmail",placeholder:"email",className:"form-control"}),l.a.createElement("br",null),l.a.createElement("input",{type:"password",name:"signinPassword",placeholder:"Password",className:"form-control"}),l.a.createElement("br",null),l.a.createElement("button",{type:"submit",className:"btn btn-dark"},"Sign In")),l.a.createElement("br",null),l.a.createElement("button",{onClick:function(){var e=Object(v.b)();Object(v.d)(e).then((function(){alert("Successfully signed out!")})).catch((function(e){alert(e.message)}))},className:"btn btn-dark"},"Sign out"),l.a.createElement("br",null))},A=n(16);n(390);var P=function(){return l.a.createElement(c.a,null,l.a.createElement(s,null),l.a.createElement("div",{className:"container"},l.a.createElement(A.c,null,l.a.createElement(A.a,{path:"/signin"},l.a.createElement(_,null)),l.a.createElement(A.a,{path:"/"},l.a.createElement(S,null)))))},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,425)).then((function(t){var n=t.getCLS,a=t.getFID,l=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),l(e),i(e),r(e)}))},F=n(60),I=n(5),N=n(228),R=n(105),j=Object(F.b)({formVisibleOnPage:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_FORM":return!e;default:return e}},mainTicketList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.id,a=t.formattedWaitTime;switch(t.type){case"DELETE_TICKET":var l=Object(N.a)({},e);return delete l[n],l;case"UPDATE_TIME":var i=Object.assign({},e[n],{formattedWaitTime:a}),r=Object.assign({},e,Object(I.a)({},n,i));return r;default:return e}},firestore:R.firestoreReducer}),L=n(107),y=(n(424),{apiKey:"AIzaSyAZPo0PhGS9289_GS6CY8iui0_zPinUKq4",authDomain:"redux-help-queue-add0d.firebaseapp.com",databaseURL:"https://redux-help-queue-add0d.firebaseio.com",projectId:"redux-help-queue-add0d",storageBucket:"redux-help-queue-add0d.appspot.com",messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"/help-queue",REACT_APP_FIREBASE_API_KEY:"AIzaSyAZPo0PhGS9289_GS6CY8iui0_zPinUKq4",REACT_APP_FIREBASE_APP_ID:"1:983395290075:web:586fd79ade60f80c5a35fe",REACT_APP_FIREBASE_AUTH_DOMAIN:"redux-help-queue-add0d.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://redux-help-queue-add0d.firebaseio.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"983395290075",REACT_APP_FIREBASE_PROJECT_ID:"redux-help-queue-add0d",REACT_APP_FIREBASE_STORAGE_BUCKET:"redux-help-queue-add0d.appspot.com"}).REACT_APP_FIREBASE_SENDER_ID,appId:"1:983395290075:web:586fd79ade60f80c5a35fe"});L.a.initializeApp(y),L.a.firestore();var D=L.a,w=Object(F.c)(j);w.subscribe((function(){return console.log(w.getState())}));var x={firebase:D,config:{userProfile:"users",useFirestoreForProfile:!0},dispatch:w.dispatch,createFirestoreInstance:R.createFirestoreInstance};r.a.render(l.a.createElement(h.a,{store:w},l.a.createElement(p.ReactReduxFirebaseProvider,x,l.a.createElement(P,null))),document.getElementById("root")),C()}},[[229,1,2]]]);
//# sourceMappingURL=main.2243e263.chunk.js.map